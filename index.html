<!DOCTYPE html>
<html>
<head>
  <script src="game_of_life.js"></script>
  <title>Hello, World!</title>
  <style>
	/* Define the box styling */
	.box {
	  width: 20px;
	  height: 20px;
	  display: inline-block;
	  border: 0px solid black;
	  margin-right: 5px;
	}

	/* Define the red box styling */
	.box.red {
	  background-color: rgb(66, 165, 66);
	}
	input[type=number] {
		border: none;
		outline: none;
		width: 24pt;
	}
  </style>
</head>
<body>
  <h1>Hello, World!</h1>
  <p>Welcome to my first HTML page.</p>
  <input type="range" min="10" max="1000" step="10" value="160" oninput="setRefreshRate(this.value)">
  <br>
  <label>
	Density:
	<input id="density-input" type="number" min="0" max="100" step="1" value="50" oninput="setDensity(this.value)">
	<span>%</span>
  </label>
  <br>
  <button id="play-pause" onclick="pauseGame()">Play/Pause</button>
  <div id="grid"></div>

  <script>
	// call a class for the game of life grid with a setup function and a randomize function
	let density;
	let refreshRate = 160;
	let stop = -1;
	const gol = new GameOfLifeGrid();

	function setRefreshRate(value) {
	  refreshRate = value;
	}
	
	function setDensity(value) {
		density = value;
	}


	// call the update function every refreshRate milliseconds until stop is true
	function gameLoop() {
		if (!stop) {
			gol.update();
			setTimeout(gameLoop, 1000-refreshRate);
		}
	}

	function pauseGame() {
		if (stop == -1) {
			// Initial frame:
			gol.randomizeArray(density);
			gol.draw();
			// Disable button:
			var densInp = document.getElementById("density-input");
			densInp.disabled = true;
			// Normal game loop
			setTimeout(gameLoop, 1000-refreshRate);
			stop = !stop;
		}
		else {
			stop = !stop;
			if (!stop) {
				gameloop();
			}
		}
	}
</script>
</body>
</html>
